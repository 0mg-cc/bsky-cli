# SPEC — bsky-cli v2.0.0 (AUR-quality roadmap)

Date: 2026-02-12
Status: Living spec (to be expanded incrementally)
Owner: Echo

## Intent

Define a distinct roadmap for **v2.0.0 quality**: publish-ready for broad Linux users (incl. AUR expectations), with stable UX, configurable policies, clear migration, and strong operational reliability.

This spec is the umbrella. The existing pattern-generalization spec is a stepping-stone input.

---

## Relationship to current specs

- `SPEC-2026-02-12-pattern-generalization-v1.8.0.md` = near-term execution spec (feature hardening/generalization)
- **This document** = v2 target contract (quality bar + release gates)

---

## v2.0.0 quality definition

A v2.0.0 release is accepted only if all four are true:

1. **Configurability**
   - Core behavior policies are configurable (safe defaults).
   - Local-only identity concerns remain profile-scoped (not hardcoded globally).

2. **Reliability**
   - Timeouts/retries/backoffs are explicit and consistent.
   - Automation paths fail safe and produce actionable diagnostics.

3. **Usability**
   - README + CLI reference cover real operator workflows.
   - Third-party setup is straightforward and provider-agnostic.

4. **Migration safety**
   - 1.x → 2.0 migration path documented, with compatibility notes and defaults.

---

## Scope pillars

## P1 — Policy-driven core

- Follow-up notification policy as config
- Anti-duplication policy as config
- Organic fallback strategy (next-source switching)
- Explicit profile presets (`conservative` / `balanced` / `aggressive`)

## P2 — Provider abstraction

- Provider-agnostic LLM client/config
- Remove OpenRouter-only coupling from feature modules
- Unified error model across providers

## P3 — Local-vs-generic contract

- Enforce local-only boundaries for persona/relationship/disclosure data
- Public truth grounding as optional provider (off by default)
- Clear docs for local profile overlays

## P4 — Ops and packaging quality

- Structured observability options (JSONL events)
- Uniform timeout policy block
- AUR-facing release discipline (versioning/changelog/migration/test gate)

---

## v2 release gates (must-pass)

1. Test suite pass on release branch
2. Docs pass (README + CLI reference + migration guide)
3. Config matrix sanity (default + minimal + advanced)
4. Provider matrix sanity (at least 2 providers validated)
5. No hardcoded operator-specific paths in generic defaults
6. Changelog includes breaking-change summary and upgrade steps

---

## Known stepping stones already underway

- Follow-up notify policy implementation (#33)
- Anti-dup policy generalization (#34)
- Public truth provider model (#35)
- Organic fallback (#36)
- Provider-agnostic LLM config (#37)

---

## Open questions (to fill over time)

- Exact provider support matrix for v2 launch
- Minimum test coverage targets by module
- Whether to include profile preset wizard in v2 or defer
- Default observability verbosity for cron-heavy users

---

## Next update protocol

When adding a v2 decision, append:
- Decision
- Rationale
- Impacted modules
- Migration impact
- Issue/PR links

This spec is intentionally concise and will be expanded iteratively.
